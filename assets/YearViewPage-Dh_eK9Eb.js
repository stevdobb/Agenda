import{e as he,t as re,m as fe,f as me,d as T,g as K,h as ae,c as h,F as U,r as F,b as r,a as p,i as k,n as ee,o as y,j as xe,k as be,l as I,w as se,p as we,C as Ce,q as Te,s as ke,v as L,x as Y,y as A,z as j,A as v,B as z,D as pe,E as $e,G as Ee,H as f,I as b,J as te,K as Se,L as V,M as Ne,N as Ve}from"./index-BvNmS5WE.js";function M(n,e){const t=()=>he(e==null?void 0:e.in,NaN),a=Ae(n);let c;if(a.date){const o=je(a.date,2);c=Fe(o.restDateString,o.year)}if(!c||isNaN(+c))return t();const g=+c;let i=0,d;if(a.time&&(i=ze(a.time),isNaN(i)))return t();if(a.timezone){if(d=Oe(a.timezone),isNaN(d))return t()}else{const o=new Date(g+i),l=re(0,e==null?void 0:e.in);return l.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),l.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),l}return re(g+i+d,e==null?void 0:e.in)}const Q={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Me=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ue=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ae(n){const e={},t=n.split(Q.dateTimeDelimiter);let s;if(t.length>2)return e;if(/:/.test(t[0])?s=t[0]:(e.date=t[0],s=t[1],Q.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Q.timeZoneDelimiter)[0],s=n.substr(e.date.length,n.length))),s){const a=Q.timezone.exec(s);a?(e.time=s.replace(a[1],""),e.timezone=a[1]):e.time=s}return e}function je(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=n.match(t);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,c=s[2]?parseInt(s[2]):null;return{year:c===null?a:c*100,restDateString:n.slice((s[1]||s[2]).length)}}function Fe(n,e){if(e===null)return new Date(NaN);const t=n.match(Me);if(!t)return new Date(NaN);const s=!!t[4],a=J(t[1]),c=J(t[2])-1,g=J(t[3]),i=J(t[4]),d=J(t[5])-1;if(s)return We(e,i,d)?Re(e,i,d):new Date(NaN);{const o=new Date(0);return!Ye(e,c,g)||!Pe(e,a)?new Date(NaN):(o.setUTCFullYear(e,c,Math.max(a,g)),o)}}function J(n){return n?parseInt(n):1}function ze(n){const e=n.match(Ie);if(!e)return NaN;const t=ne(e[1]),s=ne(e[2]),a=ne(e[3]);return Be(t,s,a)?t*fe+s*me+a*1e3:NaN}function ne(n){return n&&parseFloat(n.replace(",","."))||0}function Oe(n){if(n==="Z")return 0;const e=n.match(Ue);if(!e)return 0;const t=e[1]==="+"?-1:1,s=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return He(s,a)?t*(s*fe+a*me):NaN}function Re(n,e,t){const s=new Date(0);s.setUTCFullYear(n,0,4);const a=s.getUTCDay()||7,c=(e-1)*7+t+1-a;return s.setUTCDate(s.getUTCDate()+c),s}const Le=[31,null,31,30,31,30,31,31,30,31,30,31];function ve(n){return n%400===0||n%4===0&&n%100!==0}function Ye(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Le[e]||(ve(n)?29:28))}function Pe(n,e){return e>=1&&e<=(ve(n)?366:365)}function We(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Be(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function He(n,e){return e>=0&&e<=59}const Je={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},Ze={class:"font-bold text-lg text-center mb-3 dark:text-white capitalize"},Ge={class:"grid grid-cols-7 gap-1 text-center text-xs mb-4 text-gray-600 dark:text-gray-400"},qe={class:"space-y-2 border-t dark:border-gray-700 pt-2 mt-auto"},Ke={class:"font-bold text-blue-600 dark:text-blue-400 shrink-0 text-right min-w-[1.25rem]"},Qe=["title"],Xe=T({__name:"YearView",setup(n){const e=K(),t=ae(()=>new Date().getFullYear()),s=Array.from({length:12},(l,u)=>u);function a(l){return new Date(t.value,l,1).toLocaleString("default",{month:"long"})}function c(l){return new Date(t.value,l+1,0).getDate()}function g(l){return new Date(t.value,l,1).getDay()}function i(l){return e.events.filter(u=>{const D=new Date(u.startDate);return D.getFullYear()===t.value&&D.getMonth()===l}).sort((u,D)=>{const _=new Date(u.startDate).getTime(),x=new Date(D.startDate).getTime();return _-x})}function d(l){const u=new Date(l.startDate),D=new Date(l.endDate);return u.toDateString()===D.toDateString()?u.getDate().toString():u.getMonth()===D.getMonth()?`${u.getDate()}-${D.getDate()}`:`${u.getDate()}/${u.getMonth()+1}-${D.getDate()}/${D.getMonth()+1}`}function o(l,u){const D=new Date(t.value,l,u);D.setHours(0,0,0,0);const _=D.getTime(),x=e.events.find(m=>{const w=new Date(m.startDate);w.setHours(0,0,0,0);const $=new Date(m.endDate);return $.setHours(0,0,0,0),_>=w.getTime()&&_<=$.getTime()});return x&&x.color?{backgroundColor:x.color,color:"#ffffff",fontWeight:"bold"}:{}}return(l,u)=>(y(),h("div",Je,[(y(!0),h(U,null,F(r(s),D=>(y(),h("div",{key:D,class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-4 shadow-sm flex flex-col"},[p("h3",Ze,k(a(D)),1),p("div",Ge,[(y(),h(U,null,F(["S","M","T","W","T","F","S"],_=>p("div",{key:_,class:"font-bold"},k(_),1)),64)),(y(!0),h(U,null,F(g(D),_=>(y(),h("div",{key:`blank-${_}`}))),128)),(y(!0),h(U,null,F(c(D),_=>(y(),h("div",{key:_,class:"p-1"},[p("div",{class:"w-6 h-6 flex items-center justify-center mx-auto rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition",style:ee(o(D,_))},k(_),5)]))),128))]),p("div",qe,[(y(!0),h(U,null,F(i(D),_=>(y(),h("div",{key:_.id,class:"text-xs flex items-start space-x-2"},[p("span",Ke,k(d(_)),1),p("span",{class:"truncate text-gray-800 dark:text-gray-200",title:_.type,style:ee({color:_.color})},k(_.type),13,Qe)]))),128))])]))),128))]))}}),oe=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,ie=xe,ge=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return ie(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:c}=e,g=Object.keys(a).map(o=>{const l=t==null?void 0:t[o],u=c==null?void 0:c[o];if(l===null)return null;const D=oe(l)||oe(u);return a[o][D]}),i=t&&Object.entries(t).reduce((o,l)=>{let[u,D]=l;return D===void 0||(o[u]=D),o},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((o,l)=>{let{class:u,className:D,..._}=l;return Object.entries(_).every(x=>{let[m,w]=x;return Array.isArray(w)?w.includes({...c,...i}[m]):{...c,...i}[m]===w})?[...o,u,D]:o},[]);return ie(n,g,d,t==null?void 0:t.class,t==null?void 0:t.className)};function ye(n){return n?n.flatMap(e=>e.type===U?ye(e.children):[e]):[]}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const et=n=>typeof n<"u";function tt(n){return JSON.parse(JSON.stringify(n))}function nt(n,e,t,s={}){var a,c,g;const{clone:i=!1,passive:d=!1,eventName:o,deep:l=!1,defaultValue:u,shouldEmit:D}=s,_=be(),x=t||(_==null?void 0:_.emit)||((a=_==null?void 0:_.$emit)==null?void 0:a.bind(_))||((g=(c=_==null?void 0:_.proxy)==null?void 0:c.$emit)==null?void 0:g.bind(_==null?void 0:_.proxy));let m=o;m=m||`update:${e.toString()}`;const w=C=>i?typeof i=="function"?i(C):tt(C):C,$=()=>et(n[e])?w(n[e]):u,N=C=>{D?D(C)&&x(m,C):x(m,C)};if(d){const C=$(),E=I(C);let O=!1;return se(()=>n[e],H=>{O||(O=!0,E.value=w(H),we(()=>O=!1))}),se(E,H=>{!O&&(H!==n[e]||l)&&N(H)},{deep:l}),E}else return ae({get(){return $()},set(C){N(C)}})}const st=T({name:"PrimitiveSlot",inheritAttrs:!1,setup(n,{attrs:e,slots:t}){return()=>{var d;if(!t.default)return null;const s=ye(t.default()),a=s.findIndex(o=>o.type!==Ce);if(a===-1)return s;const c=s[a];(d=c.props)==null||delete d.ref;const g=c.props?Te(e,c.props):e,i=ke({...c,props:{}},g);return s.length===1?i:(s[a]=i,s)}}}),at=["area","img","input"],lt=T({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(n,{attrs:e,slots:t}){const s=n.asChild?"template":n.as;return typeof s=="string"&&at.includes(s)?()=>L(s,e):s!=="template"?()=>L(n.as,e,{default:t.default}):()=>L(st,e,{default:t.default})}}),S=T({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(n){const e=n;return(t,s)=>(y(),Y(r(lt),{as:n.as,"as-child":n.asChild,class:A(r(j)(r(rt)({variant:n.variant,size:n.size}),e.class))},{default:v(()=>[z(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),rt=ge("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}}),P=T({__name:"Card",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("div",{class:A(r(j)("rounded-lg border bg-card text-card-foreground shadow-sm",e.class))},[z(t.$slots,"default")],2))}}),q=T({__name:"CardContent",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("div",{class:A(r(j)("p-6 pt-0",e.class))},[z(t.$slots,"default")],2))}}),ot=T({__name:"CardDescription",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("p",{class:A(r(j)("text-sm text-muted-foreground",e.class))},[z(t.$slots,"default")],2))}}),_e=T({__name:"CardFooter",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("div",{class:A(r(j)("flex items-center p-6 pt-0",e.class))},[z(t.$slots,"default")],2))}}),W=T({__name:"CardHeader",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("div",{class:A(r(j)("flex flex-col space-y-1.5 p-6",e.class))},[z(t.$slots,"default")],2))}}),B=T({__name:"CardTitle",props:{class:{}},setup(n){const e=n;return(t,s)=>(y(),h("h3",{class:A(r(j)("text-2xl font-semibold leading-none tracking-tight",e.class))},[z(t.$slots,"default")],2))}}),X=T({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,a=nt(t,"modelValue",e,{passive:!0,defaultValue:t.defaultValue});return(c,g)=>pe((y(),h("input",{"onUpdate:modelValue":g[0]||(g[0]=i=>Ee(a)?a.value=i:null),class:A(r(j)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t.class))},null,2)),[[$e,r(a)]])}}),it=["for"],Z=T({__name:"Label",props:{for:{},class:{}},setup(n){const e=ge("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),t=n;return(s,a)=>(y(),h("label",{for:t.for,class:A(r(j)(r(e)(),t.class))},[z(s.$slots,"default")],10,it))}}),ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt={class:"space-y-2"},ct={class:"space-y-2"},ft={class:"md:col-span-2 space-y-2"},mt=["value"],pt={key:0,class:"md:col-span-2 grid grid-cols-1 gap-4"},vt={class:"space-y-2"},gt={class:"space-y-2"},yt=T({__name:"EventEditor",setup(n){const e=K(),t=I(""),s=I(""),a=I(""),c=I(""),g=I("#000000"),i=I(!1);se(()=>e.selectedEvent,o=>{var l;o?(t.value=o.startDate||"",s.value=o.endDate||"",a.value=o.type,i.value=!1,c.value="",g.value="#000000"):(t.value="",s.value="",a.value=((l=e.eventTypes[0])==null?void 0:l.name)||"",i.value=!1,c.value="",g.value="#000000")},{immediate:!0});function d(){if(!t.value||!s.value||!a.value){alert("Please fill in all fields.");return}let o=e.eventTypes.find(u=>u.name===a.value);if(i.value&&c.value){const u={name:c.value,color:g.value};e.addEventType(u),o=u,c.value="",g.value="#000000",i.value=!1,a.value=u.name}if(!o){alert("Selected event type not found.");return}const l={startDate:t.value,endDate:s.value,type:o.name,color:o.color};e.selectedEvent?e.updateEvent({...l,id:e.selectedEvent.id}):e.addEvent(l),e.selectedEvent=null}return(o,l)=>(y(),Y(r(P),null,{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[...l[7]||(l[7]=[b("Add/Edit Event",-1)])]),_:1})]),_:1}),f(r(q),null,{default:v(()=>[p("div",ut,[p("div",dt,[f(r(Z),{for:"start-date"},{default:v(()=>[...l[8]||(l[8]=[b("Start Date",-1)])]),_:1}),f(r(X),{type:"date",id:"start-date",modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=u=>t.value=u)},null,8,["modelValue"])]),p("div",ct,[f(r(Z),{for:"end-date"},{default:v(()=>[...l[9]||(l[9]=[b("End Date",-1)])]),_:1}),f(r(X),{type:"date",id:"end-date",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=u=>s.value=u)},null,8,["modelValue"])]),p("div",ft,[f(r(Z),{for:"event-type"},{default:v(()=>[...l[10]||(l[10]=[b("Event Type",-1)])]),_:1}),pe(p("select",{id:"event-type","onUpdate:modelValue":l[2]||(l[2]=u=>a.value=u),onChange:l[3]||(l[3]=u=>i.value=a.value==="custom"),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(y(!0),h(U,null,F(r(e).eventTypes,u=>(y(),h("option",{key:u.name,value:u.name},k(u.name),9,mt))),128)),l[11]||(l[11]=p("option",{value:"custom"},"-- Create Custom Type --",-1))],544),[[Se,a.value]])]),i.value?(y(),h("div",pt,[p("div",vt,[f(r(Z),{for:"custom-type-name"},{default:v(()=>[...l[12]||(l[12]=[b("Custom Type Name",-1)])]),_:1}),f(r(X),{type:"text",id:"custom-type-name",modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=u=>c.value=u)},null,8,["modelValue"])]),p("div",gt,[f(r(Z),{for:"custom-type-color"},{default:v(()=>[...l[13]||(l[13]=[b("Custom Type Color",-1)])]),_:1}),f(r(X),{type:"color",id:"custom-type-color",modelValue:g.value,"onUpdate:modelValue":l[5]||(l[5]=u=>g.value=u),class:"w-full h-10"},null,8,["modelValue"])])])):te("",!0)])]),_:1}),f(r(_e),{class:"flex justify-end gap-2"},{default:v(()=>[r(e).selectedEvent?(y(),Y(r(S),{key:0,variant:"outline",onClick:l[6]||(l[6]=u=>r(e).selectedEvent=null)},{default:v(()=>[...l[14]||(l[14]=[b("Cancel",-1)])]),_:1})):te("",!0),f(r(S),{onClick:d},{default:v(()=>[b(k(r(e).selectedEvent?"Update Event":"Save Event"),1)]),_:1})]),_:1})]),_:1}))}}),_t={class:"space-y-2"},Dt={class:"text-sm"},ue=T({__name:"PrintLegend",setup(n){const e=K();return(t,s)=>(y(),Y(r(P),{class:"w-full max-w-sm"},{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[...s[0]||(s[0]=[b("Legenda",-1)])]),_:1})]),_:1}),f(r(q),null,{default:v(()=>[p("ul",_t,[(y(!0),h(U,null,F(r(e).eventTypes,a=>(y(),h("li",{key:a.name,class:"flex items-center"},[p("span",{class:"w-5 h-5 inline-block mr-3 rounded-full",style:ee({backgroundColor:a.color})},null,4),p("span",Dt,k(a.name),1)]))),128))])]),_:1})]),_:1}))}});/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ht=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),xt=n=>{const e=ht(n);return e.charAt(0).toUpperCase()+e.slice(1)},bt=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),ce=n=>n==="";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var G={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=({name:n,iconNode:e,absoluteStrokeWidth:t,"absolute-stroke-width":s,strokeWidth:a,"stroke-width":c,size:g=G.width,color:i=G.stroke,...d},{slots:o})=>L("svg",{...G,...d,width:g,height:g,stroke:i,"stroke-width":ce(t)||ce(s)||t===!0||s===!0?Number(a||c||G["stroke-width"])*24/Number(g):a||c||G["stroke-width"],class:bt("lucide",d.class,...n?[`lucide-${de(xt(n))}-icon`,`lucide-${de(n)}`]:["lucide-icon"])},[...e.map(l=>L(...l)),...o.default?[o.default()]:[]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(n,e)=>(t,{slots:s,attrs:a})=>L(wt,{...a,...t,iconNode:e,name:n},s);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=De("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=De("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),kt={key:0,class:"text-center text-muted-foreground"},$t={class:"space-y-3"},Et={class:"flex items-center gap-3"},St={class:"font-medium"},Nt={class:"text-sm text-muted-foreground"},Vt={class:"flex items-center gap-2"},Mt=T({__name:"EventList",emits:["editEvent"],setup(n,{emit:e}){const t=K(),s=ae(()=>[...t.events].sort((g,i)=>{const d=new Date(g.startDate).getTime(),o=new Date(i.startDate).getTime();return d-o}));function a(g){confirm("Are you sure you want to delete this event?")&&t.removeEvent(g)}function c(g){const i=new Date(g.startDate).toLocaleDateString(),d=new Date(g.endDate).toLocaleDateString();return i===d?i:`${i} - ${d}`}return(g,i)=>(y(),Y(r(P),null,{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[...i[0]||(i[0]=[b("All Events",-1)])]),_:1})]),_:1}),f(r(q),null,{default:v(()=>[s.value.length===0?(y(),h("div",kt," No events added yet. ")):te("",!0),p("ul",$t,[(y(!0),h(U,null,F(s.value,d=>(y(),h("li",{key:d.id,class:"flex items-center justify-between p-3 border rounded-md"},[p("div",Et,[p("span",{class:"w-4 h-4 rounded-full",style:ee({backgroundColor:d.color})},null,4),p("div",null,[p("p",St,k(d.type),1),p("p",Nt,k(c(d)),1)])]),p("div",Vt,[f(r(S),{variant:"outline",size:"icon",onClick:o=>r(t).selectedEvent=d},{default:v(()=>[f(r(Ct),{class:"h-4 w-4"})]),_:1},8,["onClick"]),f(r(S),{variant:"destructive",size:"icon",onClick:o=>a(d.id)},{default:v(()=>[f(r(Tt),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128))])]),_:1})]),_:1}))}}),It={class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center"},Ut=T({__name:"ConfirmModal",props:{title:{},description:{}},emits:["confirm","cancel"],setup(n,{emit:e}){const t=e;return(s,a)=>(y(),h("div",It,[f(r(P),{class:"w-full max-w-md"},{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[b(k(n.title),1)]),_:1}),f(r(ot),null,{default:v(()=>[b(k(n.description),1)]),_:1})]),_:1}),f(r(_e),{class:"flex justify-end gap-4"},{default:v(()=>[f(r(S),{variant:"outline",onClick:a[0]||(a[0]=c=>t("cancel"))},{default:v(()=>[...a[2]||(a[2]=[b("Cancel",-1)])]),_:1}),f(r(S),{onClick:a[1]||(a[1]=c=>t("confirm"))},{default:v(()=>[...a[3]||(a[3]=[b("Confirm",-1)])]),_:1})]),_:1})]),_:1})]))}});function At(n){var c,g;const e=[],t=n.split(/\r\n|\n/);let s={},a=!1;for(const i of t)if(i.startsWith("BEGIN:VEVENT"))a=!0,s={};else if(i.startsWith("END:VEVENT"))a=!1,s.uid&&s.summary&&s.startDate&&s.endDate&&e.push(s);else if(a)if(i.startsWith("SUMMARY:"))s.summary=i.substring(8).trim();else if(i.startsWith("DTSTART;")){const d=i.split(":"),o=(c=d.pop())==null?void 0:c.trim(),l=d.join(":").substring(8).split(";").map(u=>u.trim());o&&(l.includes("VALUE=DATE")?s.startDate=V(M(o),"yyyy-MM-dd"):s.startDate=V(M(o.substring(0,8)),"yyyy-MM-dd"))}else if(i.startsWith("DTSTART:")){const d=i.substring(8).trim();d.length===8?s.startDate=V(M(d),"yyyy-MM-dd"):d.length>8&&d.includes("T")?s.startDate=V(M(d.substring(0,8)),"yyyy-MM-dd"):s.startDate=V(M(d),"yyyy-MM-dd")}else if(i.startsWith("DTEND;")){const d=i.split(":"),o=(g=d.pop())==null?void 0:g.trim(),l=d.join(":").substring(6).split(";").map(u=>u.trim());if(o)if(l.includes("VALUE=DATE")){const u=M(o);u.setDate(u.getDate()-1),s.endDate=V(u,"yyyy-MM-dd")}else s.endDate=V(M(o.substring(0,8)),"yyyy-MM-dd")}else if(i.startsWith("DTEND:")){const d=i.substring(6).trim();if(d.length===8){const o=M(d);o.setDate(o.getDate()-1),s.endDate=V(o,"yyyy-MM-dd")}else d.length>8&&d.includes("T")?s.endDate=V(M(d.substring(0,8)),"yyyy-MM-dd"):s.endDate=V(M(d),"yyyy-MM-dd")}else i.startsWith("DESCRIPTION:")?s.description=i.substring(12).trim():i.startsWith("UID:")&&(s.uid=i.substring(4).trim());return e}const jt={class:"page-container max-w-7xl mx-auto p-4 sm:p-6 lg:p-8"},Ft={class:"no-print grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},zt={class:"lg:col-span-2 flex flex-col gap-8"},Ot={class:"lg:col-span-1 flex flex-col gap-8"},Rt={class:"flex justify-between py-1"},Lt={class:"font-semibold"},Yt={class:"flex justify-between py-1"},Pt={class:"font-semibold"},Wt={class:"flex justify-between py-1"},Bt={class:"font-semibold"},Ht={class:""},Jt={class:"text-2xl font-bold text-center mb-4 print-only"},Zt={class:"mt-8 print-only print-legend-container"},Gt={class:"mt-8 no-print"},Kt=T({__name:"YearViewPage",setup(n){const e=Ve(),t=K(),s=I(null),a=I(null),c=I(!1);function g(){window.print()}function i(){const x={events:t.events,eventTypes:t.eventTypes},m=JSON.stringify(x,null,2),w=new Blob([m],{type:"application/json"}),$=URL.createObjectURL(w),N=document.createElement("a");N.href=$,N.download="calendar-data.json",N.click(),URL.revokeObjectURL($)}function d(){var x;(x=s.value)==null||x.click()}function o(){var x;(x=a.value)==null||x.click()}function l(x){var $;const m=($=x.target.files)==null?void 0:$[0];if(!m)return;const w=new FileReader;w.onload=N=>{var C;try{const E=JSON.parse((C=N.target)==null?void 0:C.result);E.events&&E.eventTypes?(t.setData({newEvents:E.events,newTypes:E.eventTypes}),alert("Data geÃ¯mporteerd!")):alert("Ongeldig bestandsformaat.")}catch(E){alert("Fout bij het lezen van het bestand."),console.error(E)}},w.readAsText(m)}async function u(x){var $;const m=($=x.target.files)==null?void 0:$[0];if(!m)return;const w=new FileReader;w.onload=async N=>{var C;try{const E=(C=N.target)==null?void 0:C.result,O=At(E);t.eventTypes.find(R=>R.name==="ICS Event")||t.addEventType({name:"ICS Event",color:"#888888"});const le=t.eventTypes.find(R=>R.name==="ICS Event");le?(O.forEach(R=>{t.addEvent({startDate:R.startDate,endDate:R.endDate,type:R.summary,color:le.color})}),alert(`${O.length} events from ICS imported!`)):alert('Could not find or create "ICS Event" type.'),a.value&&(a.value.value="")}catch(E){alert("Fout bij het lezen of parsen van het ICS-bestand."),console.error(E)}},w.readAsText(m)}function D(){t.clearData(),c.value=!1}function _(x){x!=="year"&&e.push("/")}return(x,m)=>(y(),h("div",jt,[c.value?(y(),Y(Ut,{key:0,title:"Are you sure?",description:"This will delete all your custom events and types. This action cannot be undone.",onConfirm:D,onCancel:m[0]||(m[0]=w=>c.value=!1)})):te("",!0),f(Ne,{currentView:"year",showSettings:!1,showRefresh:!1,"onUpdate:view":_}),p("div",Ft,[p("div",zt,[f(yt)]),p("div",Ot,[f(ue),f(r(P),null,{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[...m[2]||(m[2]=[b("Leave Days",-1)])]),_:1})]),_:1}),f(r(q),null,{default:v(()=>[m[6]||(m[6]=p("div",{class:"flex flex-col space-y-4"},null,-1)),p("div",Rt,[m[3]||(m[3]=p("span",null,"Total:",-1)),p("span",Lt,k(r(t).leaveDayStats.total),1)]),p("div",Yt,[m[4]||(m[4]=p("span",null,"Planned:",-1)),p("span",Pt,k(r(t).leaveDayStats.planned),1)]),p("div",Wt,[m[5]||(m[5]=p("span",null,"Remaining:",-1)),p("span",Bt,k(r(t).leaveDayStats.remaining),1)])]),_:1})]),_:1}),f(r(P),null,{default:v(()=>[f(r(W),null,{default:v(()=>[f(r(B),null,{default:v(()=>[...m[7]||(m[7]=[b("Data Management",-1)])]),_:1})]),_:1}),f(r(q),{class:"flex flex-wrap gap-4"},{default:v(()=>[f(r(S),{onClick:i},{default:v(()=>[...m[8]||(m[8]=[b("Export",-1)])]),_:1}),f(r(S),{onClick:d,variant:"outline"},{default:v(()=>[...m[9]||(m[9]=[b("Import JSON",-1)])]),_:1}),f(r(S),{onClick:o,variant:"outline"},{default:v(()=>[...m[10]||(m[10]=[b("Import ICS",-1)])]),_:1}),f(r(S),{onClick:m[1]||(m[1]=w=>c.value=!0),variant:"destructive"},{default:v(()=>[...m[11]||(m[11]=[b("Restart",-1)])]),_:1}),f(r(S),{onClick:g},{default:v(()=>[...m[12]||(m[12]=[b("Print Year View",-1)])]),_:1}),p("input",{type:"file",ref_key:"importFile",ref:s,onChange:l,class:"hidden",accept:".json"},null,544),p("input",{type:"file",ref_key:"importIcsFile",ref:a,onChange:u,class:"hidden",accept:".ics"},null,544)]),_:1})]),_:1})])]),p("div",Ht,[p("h2",Jt,k(new Date().getFullYear()),1),f(Xe),p("div",Zt,[f(ue)])]),p("div",Gt,[f(Mt)])]))}});export{Kt as default};
